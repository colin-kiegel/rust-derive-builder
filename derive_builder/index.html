<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `derive_builder` crate.">
    <meta name="keywords" content="rust, rustlang, rust-lang, derive_builder">

    <title>derive_builder - Rust</title>

    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'></p><script>window.sidebarCurrent = {name: 'derive_builder', ty: 'mod', relpath: '../'};</script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content mod">
<h1 class='fqn'><span class='in-band'>Crate <a class='mod' href=''>derive_builder</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a id='src-0' class='srclink' href='../src/derive_builder/src/lib.rs.html#1-111' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>Derive a builder for a struct</p>

<p>This crate implements the <em>non-consuming</em> <a href="https://aturon.github.io/ownership/builders.html">builder pattern</a> as an extension of the
<a href="https://crates.io/crates/custom_derive">custom_derive</a> macro.
When applied to a struct, it will derive <strong>setter-methods</strong> for all struct fields.</p>

<p><strong>Please note</strong>:</p>

<ul>
<li>There are slightly different ways to implement the builder pattern in rust.
The preferred way to do it, is the so called <em>non-consuming</em> variant.
That means: all generated setter-methods take and return <code>&amp;mut self</code>.</li>
<li>To complete the builder pattern you only have to implement at least one method
which actually builds something based on the struct.
These custom build methods of yours should also take <code>&amp;mut self</code> to take advantage of the
non-consuming pattern.</li>
<li><strong>Don&#39;t worry at all</strong> if you have to <code>clone</code> or <code>copy</code> data in your build methods,
because luckily the Compiler is smart enough to optimize them away in release builds
for your every-day use cases. Thats quite a safe bet - we checked this for you. ;-)
Switching to consuming signatures (=<code>self</code>) would not give you any performance
gain, but only restrict your API for every-day use cases</li>
</ul>

<h1 id='examples' class='section-header'><a href='#examples'>Examples</a></h1>
<p>This crate is best used in combination with <a href="https://crates.io/crates/custom_derive">custom_derive</a>.</p>

<pre class='rust rust-example-rendered'>
<span class='attribute'>#[<span class='ident'>macro_use</span>]</span> <span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>custom_derive</span>;
<span class='attribute'>#[<span class='ident'>macro_use</span>]</span> <span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>derive_builder</span>;

<span class='macro'>custom_derive</span><span class='macro'>!</span>{
    <span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>, <span class='ident'>PartialEq</span>, <span class='ident'>Default</span>, <span class='ident'>Clone</span>, <span class='ident'>Builder</span>)]</span>
    <span class='kw'>struct</span> <span class='ident'>Lorem</span> {
        <span class='ident'>ipsum</span>: <span class='ident'>String</span>,
        <span class='ident'>dolor</span>: <span class='ident'>i32</span>,
    }
}

<span class='kw'>fn</span> <span class='ident'>main</span>() {
    <span class='kw'>let</span> <span class='ident'>x</span> <span class='op'>=</span> <span class='ident'>Lorem</span>::<span class='ident'>default</span>().<span class='ident'>ipsum</span>(<span class='string'>&quot;sit&quot;</span>).<span class='ident'>dolor</span>(<span class='number'>42</span>).<span class='ident'>clone</span>();
    <span class='macro'>assert_eq</span><span class='macro'>!</span>(<span class='ident'>x</span>, <span class='ident'>Lorem</span> { <span class='ident'>ipsum</span>: <span class='string'>&quot;sit&quot;</span>.<span class='ident'>into</span>(), <span class='ident'>dolor</span>: <span class='number'>42</span> });
}</pre>

<p>In <code>main()</code>: The final call of <code>clone()</code> represents the act of <strong>building a new struct</strong>
when our builder is ready. For the sake of brevity we chose clone and pretend we get
something brand new. As already mentioned, the compiler will optimize this away in release
mode.</p>

<h2 id='generic-structs' class='section-header'><a href='#generic-structs'>Generic structs</a></h2>
<pre class='rust rust-example-rendered'>
<span class='attribute'>#[<span class='ident'>macro_use</span>]</span> <span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>custom_derive</span>;
<span class='attribute'>#[<span class='ident'>macro_use</span>]</span> <span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>derive_builder</span>;

<span class='macro'>custom_derive</span><span class='macro'>!</span>{
    <span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Debug</span>, <span class='ident'>PartialEq</span>, <span class='ident'>Default</span>, <span class='ident'>Clone</span>, <span class='ident'>Builder</span>)]</span>
    <span class='kw'>struct</span> <span class='ident'>GenLorem</span><span class='op'>&lt;</span><span class='ident'>T</span><span class='op'>&gt;</span> {
        <span class='ident'>ipsum</span>: <span class='ident'>String</span>,
        <span class='ident'>dolor</span>: <span class='ident'>T</span>,
    }
}

<span class='kw'>fn</span> <span class='ident'>main</span>() {
    <span class='kw'>let</span> <span class='ident'>x</span> <span class='op'>=</span> <span class='ident'>GenLorem</span>::<span class='ident'>default</span>().<span class='ident'>ipsum</span>(<span class='string'>&quot;sit&quot;</span>).<span class='ident'>dolor</span>(<span class='number'>42</span>).<span class='ident'>clone</span>();
    <span class='macro'>assert_eq</span><span class='macro'>!</span>(<span class='ident'>x</span>, <span class='ident'>GenLorem</span> { <span class='ident'>ipsum</span>: <span class='string'>&quot;sit&quot;</span>.<span class='ident'>into</span>(), <span class='ident'>dolor</span>: <span class='number'>42</span> });
}</pre>

<h2 id='doc-comments-and-attributes' class='section-header'><a href='#doc-comments-and-attributes'>Doc-Comments and Attributes</a></h2>
<p><code>#[derive(Builder)]</code> copies doc-comments and attributes <code>#[...]</code> from your fields
to the according setter-method, if it is one of the following:</p>

<ul>
<li><code>/// ...</code></li>
<li><code>#[doc = ...]</code></li>
<li><code>#[cfg(...)]</code></li>
<li><code>#[allow(...)]</code></li>
</ul>

<pre class='rust rust-example-rendered'>
<span class='attribute'>#[<span class='ident'>macro_use</span>]</span> <span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>custom_derive</span>;
<span class='attribute'>#[<span class='ident'>macro_use</span>]</span> <span class='kw'>extern</span> <span class='kw'>crate</span> <span class='ident'>derive_builder</span>;

<span class='macro'>custom_derive</span><span class='macro'>!</span>{
    <span class='attribute'>#[<span class='ident'>derive</span>(<span class='ident'>Builder</span>)]</span>
    <span class='kw'>struct</span> <span class='ident'>Lorem</span> {
        <span class='doccomment'>/// `ipsum` may be any `String` (be creative).</span>
        <span class='ident'>ipsum</span>: <span class='ident'>String</span>,
        <span class='attribute'>#[<span class='ident'>doc</span> <span class='op'>=</span> <span class='string'>r&quot;`dolor` is the estimated amount of work.&quot;</span>]</span>
        <span class='ident'>dolor</span>: <span class='ident'>i32</span>,
        <span class='comment'>// `#[derive(Builder)]` understands conditional compilation via cfg-attributes,</span>
        <span class='comment'>// i.e. =&gt; &quot;no field = no setter&quot;.</span>
        <span class='attribute'>#[<span class='ident'>cfg</span>(<span class='ident'>target_os</span> <span class='op'>=</span> <span class='string'>&quot;macos&quot;</span>)]</span>
        <span class='attribute'>#[<span class='ident'>allow</span>(<span class='ident'>non_snake_case</span>)]</span>
        <span class='ident'>Im_a_Mac</span>: <span class='ident'>bool</span>,
    }
}</pre>

<h2 id='gotchas' class='section-header'><a href='#gotchas'>Gotchas</a></h2>
<ul>
<li>Tuple structs and unit structs are not supported as they have no field
names.</li>
<li>When defining a generic struct, you cannot use <code>VALUE</code> as a generic
parameter as this is what all setters are using.</li>
</ul>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "derive_builder";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>